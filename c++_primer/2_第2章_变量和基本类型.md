[TOC]

# 第2章_变量和基本类型

- 数据类型是程序的基础：它告诉我们数据的意义以及我们能在数据上执行的操作。

---
## 2.1 基本内置类型

- 基本数据类型包括
  - 算数类型
    - 字符
    - 整数
    - 布尔值
    - 浮点数
  - 空类型(void)

### 2.1.1 算数类型

- 整型
  - 布尔型：bool
    - 取值要么是真（true），要么是假（false）
  - 字符型：
    - 基本字符型：char
      - 大小和一个机器字节一样
    - 拓展字符型：wchar_t，char16_t，char32_t
      - wchar_t 可以存放机器最大扩展字符集中的任意一个字符
      - char16_t 和 char32_t 则为 Unicode 字符集服务
  - 对于其他整型，C++ 规定
    - sizeof(short) <= sizeof(int) <= sizeof(long) <= sizeof(long long)
  - 注：
    - 除了布尔型和拓展字符型，其他整型可以用 signed 和 unsigned 区分带符号和不带符号两种
    - 对于基本字符型 char，分为 char、signed char、unsigned char 三种，char 会根据具体实现的差别，实际表现为 signed char 或 unsigned char
    - 无符号类型中的所有 bit 都用来存储值

- 浮点型
  - 单精度型：float
    - 大小一般为 32 bit
    - 精度一般为 7 个有效位
  - 双精度型：double
    - 大小一般为 64 bit
    - 精度一般为 16 个有效位
  - 拓展精度型：long double
    - 常常被用于有特殊浮点需求的硬件（具体实现不同则精度不同）

- 注：
  - C++ 标准只规定了各个数据类型的最小尺寸（编译器可以为这些类型赋予更大的尺寸）
  - 可寻址的最小内存块称为 `字节`
  - 存储的基本单元称为 `字`，通常由几个（4 或 8）字节组成
  - 为了赋予内存中某个地址明确的含义，必须首先知道存储在该地址的数据的类型
    - 类型决定了数据所占的比特数以及如何解释这些比特内容


- **关于如何选择类型**
  - 当明确数值不可能为负数时，选用无符号类型
  - 使用 int 执行整数运算；如果超过 int 的范围，则使用 long long
  - 在算数表达式中不要使用 bool 和 char
  - 使用 char 的使用要明确使用 unsigned char 或 signed char
  - 浮点数运算使用 double

### 2.1.2 类型转换

- ==类型所能表示的值的范围决定了类型转换的过程
  1. `非布尔类型`赋值给`布尔类型`：若初始值为 0，则结果为 false；否则，结果为 true
  1. `布尔类型`赋值给`非布尔类型`：若初始值为 false，则结果为 0；否则，结果 1
  1. `浮点型`赋值给`整型`：仅保留浮点型的整数部分（直接舍弃小数部分）
  1. `整型`赋值给`浮点型`：浮点型的小数部分为 0，整数部分为整型的数值（整型的数值太大时可能损失精度）
  1. 赋值给`无符号类型`一个超过它表示范围的值：结果为初始值对无符号型表示数值的总数取模后的余数
    - 例如：把 -1 赋值给 unsigned char 的结果为 255（= -1 mod 256）
  1. 赋值给`带符号类型`一个超过它表示范围的值：结果**未定义**

- 注：==对于含有无符号类型的表达式==
  - 当一个算数表达式中既有无符号数又有 int 值时，那个 int 值会被转换为无符号数后再参与运算
  - 把负数转换为无符号数类似于直接给无符号数赋一个负值（即上面的第 5 条）
  - 当从无符号数中减去一个值时，不管这个值是不是无符号数，都必须确保结果不能是一个负值（即上面的第 5 条）

### 2.1.3 字面值常量

> 每个字面值常量都对应一种数据类型，字面常量的形式和值决定了它的数据类型。

- 整型字面值
  - 十进制：
    - 非 0 开头的整数
    - 默认带符号，取 int，long 和 long long 中尺寸最小且范围足够的那个
  - 八进制：以 0 开头的整数
    - 默认可能带也可能不带符号
    - 取 int，unsigned int，long，unsigned long，long long 和 unsigned long long 中尺寸最小且范围足够的那个
  - 十六进制：0x 或 0X 开头的整数
    - 默认可能带也可能不带符号
    - 取 int，unsigned int，long，unsigned long，long long 和 unsigned long long 中尺寸最小且范围足够的那个
  - 注：short 没有对应的字面值
- 浮点型字面值
  - 小数或科学计数法表示的指数
  - 默认为 double
- 字符字面值
  - 单引号括起来的一个字符
- 字符串字面值
  - 双引号括起来的一个或多个字符
  - 以空字符 `\0` 结尾
  - 注：如果==两个字符串字面值==位置紧邻且仅由空格、缩进和换行符分隔，则它们==实际上是一个整体==
- 转义序列：不可打印或具有特殊含义的序列，被当做==一个字符==使用
  - 以反斜杠 `\` 开始
  - 转移序列的泛化形式
    - `\` 后紧跟 1、2 或 3 个八进制数字（超过 3 个的数字不再属于转移序列）
    - `\x` 后跟多个数字（所有数字都属于转移序列）
- **指定字面值的类型**
  | 位置 | 符号 | 含义 | 类型 | 适用范围 | 示例 |
  | :---: | :---: | :---: | :---: | :---: | :---: |
  | 前缀 | u | Unicode 16 字符 | char16_t | 字符和字符串 | u'a' |
  | ^   | U | Unicode 32 字符 | char32_t | ^ | U"abc" |
  | ^   | L | 宽字符 | wchar_t | ^ | L'a' |
  | ^   | u8 | UTF-8 | char | 字符串 | u8"hello" |
  | 后缀 | u or U | unsigned | unsigned int，unsigned long，unsigned long long | 整型 | 110u |
  | ^    | l or L | > | long | ^ | 110L |
  | ^    | ll or LL | > | long long | ^ | 110LL |
  | ^    | f or F | > | float | 浮点型 | 3.14F |
  | ^    | l or L | > | long double | ^ | 3.14L | 
- 布尔型字面值：==true 和 false==
- 指针型字面值：==nullptr==

---
## 2.2 变量

---
## 2.3 复合类型

---
## 2.4 const限定符

---
## 2.5 处理类型

---
## 2.6 自定义数据结构